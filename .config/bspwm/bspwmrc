#!/bin/sh

bspc config automatic_scheme longest_side
bspc config initial_polarity second_child

bspc config pointer_follows_focus false
bspc config focus_follows_pointer true
bspc config single_monocle        true
bspc config gapless_monocle       false
bspc config borderless_monocle    true
bspc config window_gap            $(xrdb-get-value wm.gaps)
bspc config border_width          $(xrdb-get-value wm.border)
bspc config split_ratio           0.52


TOP_GAP=$(($(xrdb-get-value bar.height) + $(xrdb-get-value bar.border)))
SCREEN_WIDTH=$(bspwmc focused_monitor_width)
SCREEN_HEIGHT=$(bspwmc focused_monitor_height)
bspc rule --add '*:float'     state=floating
bspc rule --add '*:tophalf'\
     state=floating\
     sticky=on\
     border=off\
     rectangle=${SCREEN_WIDTH}x$((SCREEN_HEIGHT / 2))+0+${TOP_GAP}

bspc rule --add Pinta            state=floating
bspc rule --add Sxiv             state=floating
bspc rule --add Zenity           state=floating
bspc rule --add feh              state=floating
bspc rule --add copyq            state=floating
bspc rule --add 'Crow Translate' state=floating
bspc rule --add 'whatsapp-nativefier-d52542' state=floating

bspc rule --add mpv           state=floating
bspc rule --add 'mpv:youtube' focus=off

bspc rule --add Screenkey     manage=off
bspc rule --add 'dota2'       border=off


bspc rule -a Vivaldi-stable desktop='^1' follow=on
bspc rule -a firefox        desktop='^1' follow=on


# Start WM related stuff
pgrep picom || picom &
pgrep sxhkd || sxhkd &
init-desktops &
